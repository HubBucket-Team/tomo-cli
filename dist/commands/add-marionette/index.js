"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.tasks=void 0;var _asyncToGenerator2=_interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator")),_path=require("path"),_utils=require("../../utils"),_common=require("../../utils/common"),_Scaffolder=require("../../utils/Scaffolder");const MARIONETTE_DEPENDENCIES=["jquery","backbone","backbone.marionette","backbone.radio","marionette.approuter","morphdom","lodash-es","redux"],ALWAYS=/*#__PURE__*/function(){var a=(0,_asyncToGenerator2.default)(function*(){return!0});return function(){return a.apply(this,arguments)}}(),sourceDirectory=(0,_path.join)(__dirname,"templates"),scaffolder=new _Scaffolder.Scaffolder({sourceDirectory}),tasks=[{text:"Copy Marionette.js boilerplate and assets",task:function(){var a=(0,_asyncToGenerator2.default)(function*({assetsDirectory:a,sourceDirectory:b,useParcel:c,usePika:d}){const e=c||d?"index-in-place.html":"index.html";yield scaffolder.target(b).copy("main.js").target(`${b}/components`).copy("app.js").target(`${b}/shims`).copy("mn.renderer.shim.js").target(`${b}/plugins`).copy("mn.radio.logging.js").copy("mn.redux.state.js").target(`${a}`).copy(e,"index.html").target(`${a}/css`).copy("style.css").target(`${a}/images`).copy(".gitkeep").target(`${a}/fonts`).copy(".gitkeep").target(`${a}/library`).copy(".gitkeep").target(`${a}/workers`).copy(".gitkeep").commit()});return function task(){return a.apply(this,arguments)}}(),condition:ALWAYS},{text:"Set package.json \"main\" attribute",task:function(){var a=(0,_asyncToGenerator2.default)(function*({sourceDirectory:a}){yield new _utils.PackageJsonEditor().extend({main:`${a}/main.js`}).commit()});return function task(){return a.apply(this,arguments)}}(),condition:()=>(0,_common.someDoExist)("package.json")},{text:"Install Marionette.js dependencies",task:({skipInstall:a})=>(0,_utils.install)(MARIONETTE_DEPENDENCIES,{skipInstall:a}),condition:({isNotOffline:a})=>a&&(0,_common.someDoExist)("package.json")}];exports.tasks=tasks;var _default=tasks;exports.default=_default;