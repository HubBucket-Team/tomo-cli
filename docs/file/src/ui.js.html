<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../">
  <title data-ice="title">src/ui.js | tomo-cli</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="A friendly command line tool designed to help create sustainable software using web technology"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="tomo-cli"><meta property="twitter:description" content="A friendly command line tool designed to help create sustainable software using web technology"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/jhwohlgemuth/tomo-cli"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/ui.js~UI.html">UI</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CommandError">CommandError</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Debug">Debug</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-OfflineWarning">OfflineWarning</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Task">Task</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-TaskList">TaskList</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Warning">Warning</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-populateQueue">populateQueue</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#commands">commands</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-addA11y">addA11y</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-addBabel">addBabel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-addBrowsersync">addBrowsersync</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-addEsdoc">addEsdoc</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-addMakefile">addMakefile</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-addParcel">addParcel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-removeParcel">removeParcel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-addPostcss">addPostcss</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-removePostcss">removePostcss</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-addRollup">addRollup</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-removeRollup">removeRollup</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-rustTasks">rustTasks</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-addWebpack">addWebpack</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-removeWebpack">removeWebpack</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-task">task</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#commands-add-eslint">commands/add-eslint</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-tasks">tasks</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#commands-add-jest">commands/add-jest</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-addJest">addJest</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#commands-add-marionette">commands/add-marionette</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-tasks">tasks</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#utils">utils</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/utils/BasicEditor.js~BasicEditor.html">BasicEditor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/utils/MakefileEditor.js~MakefileEditor.html">MakefileEditor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/utils/Scaffolder.js~Scaffolder.html">Scaffolder</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-allDoExist">allDoExist</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-allDoExistSync">allDoExistSync</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-allDoNotExist">allDoNotExist</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-allDoNotExistSync">allDoNotExistSync</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-dict">dict</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-format">format</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getBinDirectory">getBinDirectory</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-parse">parse</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-someDoExist">someDoExist</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-someDoExistSync">someDoExistSync</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createJsonEditor">createJsonEditor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-createModuleEditor">createModuleEditor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-choose">choose</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getIntendedInput">getIntendedInput</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-getVersions">getVersions</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-install">install</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-uninstall">uninstall</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-verifyRustInstallation">verifyRustInstallation</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-BabelConfigModuleEditor">BabelConfigModuleEditor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-EslintConfigModuleEditor">EslintConfigModuleEditor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-PackageJsonEditor">PackageJsonEditor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-PostcssConfigEditor">PostcssConfigEditor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-PurgecssConfigEditor">PurgecssConfigEditor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RollupConfigEditor">RollupConfigEditor</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-WebpackConfigEditor">WebpackConfigEditor</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/ui.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">import React, {Component, Fragment, useContext, useEffect, useReducer, useState} from &apos;react&apos;;
import PropTypes from &apos;prop-types&apos;;
import camelCase from &apos;lodash/camelCase&apos;;
import isFunction from &apos;lodash/isFunction&apos;;
import isString from &apos;lodash/isString&apos;;
import isUndefined from &apos;lodash/isUndefined&apos;;
import {bold, dim} from &apos;chalk&apos;;
import Queue from &apos;p-queue&apos;;
import pino from &apos;pino&apos;;
import isOnline from &apos;is-online&apos;;
import {Box, Color, StdinContext, Text} from &apos;ink&apos;;
import {default as InkBox} from &apos;ink-box&apos;;
import Spinner from &apos;ink-spinner&apos;;
import SelectInput from &apos;ink-select-input&apos;;
import figures from &apos;figures&apos;;
import {highlight} from &apos;cardinal&apos;;
import commands from &apos;./commands&apos;;
import {getIntendedInput} from &apos;./utils&apos;;
import {dict, format} from &apos;./utils/common&apos;;

const {assign} = Object;
const space = &apos; &apos;;
const Check = ({isSkipped}) =&gt; &lt;Color bold green={!isSkipped} dim={isSkipped}&gt;{figures.tick}{space}&lt;/Color&gt;;
const X = () =&gt; &lt;Color bold red&gt;{figures.cross}{space}&lt;/Color&gt;;
const Pending = () =&gt; &lt;Color cyan&gt;&lt;Spinner&gt;&lt;/Spinner&gt;{space}&lt;/Color&gt;;
const Item = ({isSelected, label}) =&gt; &lt;Color bold={isSelected} cyan={isSelected}&gt;{label}&lt;/Color&gt;;
const Indicator = ({isSelected}) =&gt; &lt;Box marginRight={1}&gt;{isSelected ? &lt;Color bold cyan&gt;{figures.arrowRight}&lt;/Color&gt; : &apos; &apos;}&lt;/Box&gt;;
export const CommandError = errors =&gt; {
    const log = pino(
        {prettyPrint: {levelFirst: true}},
        pino.destination(&apos;./tomo-errors.txt&apos;)
    );
    useEffect(() =&gt; {
        log.error(errors);
    }, []);
    return &lt;Box flexDirection={&apos;column&apos;} marginTop={1} marginLeft={1}&gt;
        &lt;Box&gt;&lt;X /&gt;&lt;Text&gt;Something has gone horribly &lt;Color bold red&gt;wrong&lt;/Color&gt;&lt;/Text&gt;&lt;/Box&gt;
        &lt;Box marginLeft={2}&gt;&#x21B3;{space}&lt;Color dim&gt;Details written to ./tomo-errors.txt&lt;/Color&gt;&lt;/Box&gt;
    &lt;/Box&gt;;
};
export const Debug = ({data, title}) =&gt; &lt;Box flexDirection={&apos;column&apos;} marginTop={1} marginLeft={1}&gt;
    &lt;Box&gt;
        &lt;Color bold cyan&gt;DEBUG: &lt;/Color&gt;
        &lt;Color dim&gt;{title}&lt;/Color&gt;
    &lt;/Box&gt;
    &lt;Box&gt;
        {highlight(format(data))}
    &lt;/Box&gt;
&lt;/Box&gt;;
const Description = ({command}) =&gt; {
    const getDescription = item =&gt; {
        const DEFAULT = `${dim(&apos;Sorry, I don\&apos;t have anything to say about&apos;)} ${item}`;
        const lookup = dict({
            project: `Scaffold a new Node.js project with ${bold.yellow(&apos;Babel&apos;)}, ${bold(&apos;ESLint&apos;)}, and ${bold.magenta(&apos;Jest&apos;)}`,
            app: `Scaffold a new ${bold.red(&apos;Marionette.js&apos;)} ${bold(&apos;web application&apos;)} - basically a project with CSS, bundling, and stuff`,
            server: `Scaffold a new Express server with security baked in - ${bold.yellow(&apos;WORK IN PROGRESS&apos;)}`,
            a11y: `Add automated ${bold(&apos;accessibility&apos;)} testing`,
            babel: `Use next generation JavaScript, ${bold(&apos;today!&apos;)}`,
            browsersync: `Time-saving ${bold(&apos;synchronised browser&apos;)} testing (demo your app with ${bold.yellow(&apos;live-reload&apos;)})`,
            esdoc: `Generate ${bold(&apos;documentation&apos;)} from your comments`,
            eslint: `Pluggable ${bold(&apos;linting&apos;)} utility for JavaScript and JSX`,
            jest: `Delightful JavaScript ${bold(&apos;Testing&apos;)} Framework with a focus on simplicity`,
            makefile: `Create a ${bold(&apos;Makefile&apos;)} from your package.json, like ${bold.magenta(&apos;magic!&apos;)}`,
            parcel: `${bold(&apos;Bundle&apos;)} your assets (blazing fast with ${bold(&apos;zero configuration&apos;)})`,
            postcss: `Use ${bold(&apos;future CSS&apos;)}, never write vendor prefixes again, and much much more!`,
            rollup: `${bold(&apos;Bundle&apos;)} your assets (focused on ${bold(&apos;ES6&apos;)} modules and tree shaking)`,
            webpack: `${bold(&apos;Bundle&apos;)} your assets (with great support and a rich ecosystem)`
        });
        return lookup.has(item) ? lookup.get(item) : DEFAULT;
    };
    return &lt;Box marginBottom={1}&gt;
        &lt;Color cyan&gt;{getDescription(command)}&lt;/Color&gt;
    &lt;/Box&gt;;
};
const ErrorMessage = ({info}) =&gt; &lt;Box flexDirection={&apos;column&apos;} marginBottom={1}&gt;
    &lt;InkBox borderColor={&apos;yellow&apos;} margin={{left: 1, top: 1}} padding={{left: 1, right: 1}}&gt;
        &lt;Color yellow&gt;(&#x256F;&#xB0;&#x25A1; &#xB0;)&#x256F; &#x253B;&#x2501;&#x253B; arrrgh...&lt;/Color&gt;
    &lt;/InkBox&gt;
    &lt;Box marginLeft={4}&gt;
        &#x21B3; &lt;Color dim&gt;Something went wrong...&lt;/Color&gt;
    &lt;/Box&gt;
    &lt;Box marginLeft={6} marginTop={1}&gt;
        &lt;Color dim&gt;&lt;Box&gt;{info}&lt;/Box&gt;&lt;/Color&gt;
    &lt;/Box&gt;
&lt;/Box&gt;;
class ErrorBoundary extends Component {
    constructor(props) {
        super(props);
        this.state = {
            info: &apos;&apos;,
            error: {},
            hasError: false
        };
    }
    static getDerivedStateFromError() {
        return {hasError: true};
    }
    componentDidCatch(error, info) {
        this.setState({error, info});
    }
    render() {
        const {error, hasError} = this.state;
        const {children} = this.props;
        return hasError ? &lt;ErrorMessage error={error}/&gt; : children;
    }
}
const SubCommandSelect = ({command, items, onSelect}) =&gt; {
    const [highlighted, setHighlighted] = useState(items[0].value);
    const onHighlight = item =&gt; {
        setHighlighted(item.value);
    };
    const showWithRemove = `${bold.yellow(&apos;CAUTION:&apos;)} tomo shall ${bold.red(&apos;remove&apos;)} that which tomo would have ${bold.green(&apos;added&apos;)}`;
    return &lt;Box flexDirection={&apos;column&apos;} paddingTop={1} paddingBottom={1} paddingLeft={1}&gt;
        {command === &apos;remove&apos; ? &lt;Box marginBottom={1}&gt;{showWithRemove}&lt;/Box&gt; : &lt;Description command={highlighted}&gt;&lt;/Description&gt;}
        &lt;SelectInput
            items={items}
            onSelect={onSelect}
            onHighlight={onHighlight}
            itemComponent={Item}
            indicatorComponent={Indicator}
        &gt;&lt;/SelectInput&gt;
    &lt;/Box&gt;;
};
const UnderConstruction = () =&gt; &lt;Box marginBottom={1}&gt;
    &lt;InkBox padding={{left: 1, right: 1}} margin={{left: 1, top: 1}}&gt;
        &lt;Color bold yellow&gt;UNDER CONSTRUCTION&lt;/Color&gt;
    &lt;/InkBox&gt;
&lt;/Box&gt;;
/**
 * Component to display warning message requiring user input
 * @param {Object} props Function component props
 * @param {ReactNode} props.children Function component children
 * @param {function} props.callback Function to be called after user interacts with warning
 * @return {ReactComponent} Warning component
 */
export const Warning = ({callback, children}) =&gt; {
    const {setRawMode, stdin} = useContext(StdinContext);
    useEffect(() =&gt; {
        setRawMode &amp;&amp; setRawMode(true);
        stdin.on(&apos;data&apos;, callback);
        return function cleanup() {
            stdin.removeListener(&apos;data&apos;, callback);
            setRawMode &amp;&amp; setRawMode(false);
        };
    });
    return &lt;Box flexDirection={&apos;column&apos;} marginBottom={1}&gt;
        &lt;InkBox borderColor={&apos;yellow&apos;} margin={{left: 1, top: 1}} padding={{left: 1, right: 1}}&gt;
            &lt;Color yellow&gt;oops...&lt;/Color&gt;
        &lt;/InkBox&gt;
        &lt;Box marginLeft={4}&gt;
            &#x21B3; {children}
        &lt;/Box&gt;
        &lt;Box marginLeft={6} marginTop={1}&gt;
            &lt;Color dim&gt;Press &lt;/Color&gt;&lt;Text bold&gt;ENTER&lt;/Text&gt;&lt;Color dim&gt; to continue&lt;/Color&gt;
        &lt;/Box&gt;
    &lt;/Box&gt;;
};
export const OfflineWarning = () =&gt; &lt;Box flexDirection={&apos;column&apos;} marginBottom={1}&gt;
    &lt;InkBox borderColor={&apos;yellow&apos;} margin={{left: 1, top: 1}} padding={{left: 1, right: 1}}&gt;
        &lt;Color yellow&gt;(&#x2312;_&#x2312;;) This is awkward...&lt;/Color&gt;
    &lt;/InkBox&gt;
    &lt;Box marginLeft={4} flexDirection={&apos;column&apos;}&gt;
        &lt;Box&gt;&#x21B3; &lt;Text&gt;...but you appear to be &lt;Color bold red&gt;offline&lt;/Color&gt;&lt;/Text&gt;&lt;/Box&gt;
        &lt;Box&gt;&#x21B3; &lt;Text&gt;Please connect to the internet and &lt;Color bold cyan&gt;try again&lt;/Color&gt;&lt;/Text&gt;&lt;/Box&gt;
    &lt;/Box&gt;
    &lt;Box marginLeft={6} marginTop={1}&gt;
        &lt;Color dim&gt;No dependencies were installed&lt;/Color&gt;
    &lt;/Box&gt;
&lt;/Box&gt;;
/**
 * Add async tasks to a queue, handle completion with actions dispatched via dispatch function
 * @param {Object} data Data to be used for populating queue
 * @param {Queue} [data.queue={}] p-queue instance
 * @param {Object[]} [data.tasks=[]] Array of task objects
 * @param {function} [data.dispatch=()=&gt;{}] Function to dispatch task completion (complete, skip, error) actions
 * @param {Object} [data.options={}] Options object to pass to task function
 * @return {undefined} Returns nothing (side effects only)
 */
export async function populateQueue(data = {queue: {}, tasks: [], dispatch: () =&gt; {}, options: {skipInstall: false}}) {
    const {queue, tasks, dispatch, options} = data;
    const {skipInstall} = options;
    const isNotOffline = skipInstall || await isOnline();
    dispatch({type: &apos;status&apos;, payload: isNotOffline ? &apos;online&apos; : &apos;offline&apos;});
    for (const [index, item] of tasks.entries()) {
        const {condition, task} = item;
        try {
            if (await condition({...options, isNotOffline})) {
                await queue
                    .add(() =&gt; task({...options, isNotOffline}))
                    .then(() =&gt; dispatch({type: &apos;complete&apos;, payload: index}))
                    .catch(() =&gt; dispatch({
                        type: &apos;error&apos;, payload: {
                            index,
                            title: &apos;Failed to add task to queue&apos;,
                            location: &apos;task&apos;,
                            details: item.text
                        }
                    }));
            } else {
                dispatch({type: &apos;skipped&apos;, payload: index});
            }
        } catch (error) {
            dispatch({
                type: &apos;error&apos;,
                payload: {
                    error,
                    index,
                    title: &apos;Failed to test task conditions&apos;,
                    location: &apos;condition&apos;,
                    details: item.text
                }
            });
        }
    }
}
/**
 * Task component
 * @param {Object} props Function component props
 * @param {boolean} props.isComplete Control display of check (true) or loading (false)
 * @param {boolean} props.isErrored Control display of x (true)
 * @param {boolean} props.isSkipped Control color of check - green (false) or dim (true)
 * @param {string} props.text Task text
 * @example
 * &lt;Task text={&apos;This task is done before it starts&apos;} isComplete={true}&gt;&lt;/Task&gt;
 * @return {ReactComponent} Task component
 */
export const Task = ({isComplete, isErrored, isPending, isSkipped, text}) =&gt; &lt;Box flexDirection=&apos;row&apos; marginLeft={3}&gt;
    {isComplete &amp;&amp; &lt;Check isSkipped={isSkipped}&gt;&lt;/Check&gt;}
    {isErrored &amp;&amp; &lt;X/&gt;}
    {isPending &amp;&amp; &lt;Pending/&gt;}
    &lt;Text&gt;&lt;Color dim={isComplete}&gt;{text}&lt;/Color&gt;&lt;/Text&gt;
&lt;/Box&gt;;
/**
 * Task list component
 * @param {Object} props Function component props
 * @param {string} props.command Command - new | create | add
 * @param {Object} props.options Command line flags (see help)
 * @param {string[]} props.terms Terms - eslint | babel | jest | postcss | docs
 * @example
 * &lt;TaskList command={&apos;add&apos;} terms={&apos;eslint&apos;} options={{skipInstall: true}}&gt;&lt;/TaskList&gt;
 * @return {ReactComponent} Task list component
 */
export const TaskList = ({command, options, terms, done}) =&gt; {
    const reducer = (state, {type, payload}) =&gt; {
        const {completed, errors, skipped} = state;
        const update = val =&gt; assign({}, state, val);
        const lookup = dict({
            complete: () =&gt; update({completed: [...completed, payload]}),
            skipped: () =&gt; update({skipped: [...skipped, payload]}),
            error: () =&gt; update({errors: [...errors, {payload}]}),
            status: () =&gt; update({status: payload})
        });
        return lookup.has(type) ? lookup.get(type)() : state;
    };
    const initialState = {
        completed: [],
        skipped: [],
        errors: [],
        status: &apos;online&apos;
    };
    const [state, dispatch] = useReducer(reducer, initialState);
    const {completed, errors, skipped, status} = state;
    const queue = new Queue({concurrency: 1});
    const tasks = terms
        .map(term =&gt; commands[command][term])
        .flat(1)
        .map(val =&gt; (isFunction(val) ? val(options) : val))
        .flat(1);
    const tasksComplete = ((completed.length + skipped.length) === tasks.length);
    const hasError = (errors.length &gt; 0);
    const {debug, skipInstall} = options;
    useEffect(() =&gt; {
        populateQueue({queue, tasks, options, dispatch});
    }, []);
    tasksComplete &amp;&amp; isFunction(done) &amp;&amp; done();
    return &lt;ErrorBoundary&gt;
        {debug &amp;&amp; &lt;Debug data={{completed, errors, skipped, tasks, terms}} title={&apos;Tasklist data&apos;}&gt;&lt;/Debug&gt;}
        {status === &apos;offline&apos; &amp;&amp; !skipInstall &amp;&amp; &lt;OfflineWarning/&gt;}
        {hasError &amp;&amp; &lt;CommandError errors={errors}&gt;&lt;/CommandError&gt;}
        &lt;Box flexDirection={&apos;column&apos;} marginBottom={1}&gt;
            &lt;InkBox
                margin={{left: 1, top: 1}}
                padding={{left: 1, right: 1}}
                borderColor={tasksComplete ? &apos;green&apos; : (hasError ? &apos;red&apos; : &apos;cyan&apos;)}
                borderStyle={&apos;round&apos;}&gt;
                &lt;Color bold white&gt;{command} {terms.join(&apos; &apos;)}&lt;/Color&gt;
            &lt;/InkBox&gt;
            &lt;Box flexDirection=&apos;column&apos; marginBottom={1}&gt;
                {tasks.map(({optional, text}, index) =&gt; {
                    const {completed, errors, skipped} = state;
                    const key = camelCase(text);
                    const isSkipped = skipped.includes(index);
                    const isComplete = completed.includes(index) || isSkipped;
                    const isErrored = errors.map(error =&gt; error.payload.index).includes(index);
                    const isPending = [isComplete, isSkipped, isErrored].every(val =&gt; !val);
                    const shouldBeShown = isUndefined(optional) || (isFunction(optional) &amp;&amp; optional(options));
                    const data = {isSkipped, isComplete, isErrored, isPending, text};
                    return shouldBeShown ?
                        &lt;Fragment key={key}&gt;{debug &amp;&amp; &lt;Debug data={data} title={`Data - task #${index}`}&gt;&lt;/Debug&gt;}&lt;Task
                            text={text}
                            isSkipped={isSkipped}
                            isComplete={isComplete}
                            isErrored={isErrored}
                            isPending={isPending}&gt;
                        &lt;/Task&gt;&lt;/Fragment&gt; :
                        &lt;Fragment key={key}&gt;{debug &amp;&amp; &lt;Debug data={data} title={`Data - task #${index}`}&gt;&lt;/Debug&gt;}&lt;Box&gt;&lt;/Box&gt;&lt;/Fragment&gt;;
                })}
            &lt;/Box&gt;
        &lt;/Box&gt;
    &lt;/ErrorBoundary&gt;;
};
/**
 * Main tomo UI component
 * @param {Object} props Component props
 * @return {ReactComponent} Main tomo UI component
 */
class UI extends Component {
    constructor(props) {
        super(props);
        const {flags, input} = props;
        const {ignoreWarnings} = flags;
        const [command, ...terms] = input;
        const hasCommand = isString(command);
        const hasTerms = terms.length &gt; 0;
        const {intendedCommand, intendedTerms} = hasCommand ? getIntendedInput(commands, command, terms) : {};
        const compare = (term, index) =&gt; (term !== terms[index]);
        const showWarning = ((command !== intendedCommand) || intendedTerms.map(compare).some(Boolean)) &amp;&amp; !ignoreWarnings;
        this.state = {
            hasTerms,
            hasCommand,
            showWarning,
            intendedTerms,
            intendedCommand
        };
        this.updateWarning = this.updateWarning.bind(this);
        this.updateTerms = this.updateTerms.bind(this);
    }
    render() {
        const {done, flags} = this.props;
        const {hasCommand, hasTerms, intendedCommand, intendedTerms, showWarning} = this.state;
        const VALID_COMMANDS = hasCommand ? Object.keys(commands[intendedCommand]) : [];
        const selectInputCommandItems = hasCommand ? VALID_COMMANDS.map(command =&gt; ({label: command, value: command})) : [];
        return &lt;ErrorBoundary&gt;
            {showWarning ?
                &lt;Warning callback={this.updateWarning}&gt;
                    &lt;Text&gt;Did you mean &lt;Color bold green&gt;{intendedCommand} {intendedTerms.join(&apos; &apos;)}&lt;/Color&gt;?&lt;/Text&gt;
                &lt;/Warning&gt; :
                (hasCommand &amp;&amp; hasTerms) ?
                    &lt;TaskList command={intendedCommand} terms={intendedTerms} options={flags} done={done}&gt;&lt;/TaskList&gt; :
                    hasCommand ?
                        &lt;SubCommandSelect command={intendedCommand} items={selectInputCommandItems} onSelect={this.updateTerms}&gt;&lt;/SubCommandSelect&gt; :
                        &lt;UnderConstruction /&gt;
            }
        &lt;/ErrorBoundary&gt;;
    }
    /**
     * Callback function for warning component
     * @param {string} data Character data from stdin
     * @return {undefined} Returns nothing
     */
    updateWarning(data) {
        const key = String(data);
        (key === &apos;\r&apos;) ? this.setState({showWarning: false}) : process.exit(0);
    }
    /**
     * @param {Object} args Function options
     * @param {string} args.value Intended term
     * @return {undefined} Returns nothing
     */
    updateTerms({value}) {
        this.setState({
            hasTerms: true,
            intendedTerms: [value]
        });
    }
}
Check.propTypes = {
    isSkipped: PropTypes.bool
};
Check.defaultProps = {
    isSkipped: false
};
Debug.propTypes = {
    data: PropTypes.any,
    title: PropTypes.string
};
Description.propTypes = {
    command: PropTypes.string
};
SubCommandSelect.propTypes = {
    command: PropTypes.string,
    items: PropTypes.arrayOf(PropTypes.object),
    onSelect: PropTypes.func
};
Indicator.propTypes = {
    isSelected: PropTypes.bool
};
Indicator.defaultProps = {
    isSelected: false
};
Item.propTypes = {
    isSelected: PropTypes.bool,
    label: PropTypes.string.isRequired
};
Item.defaultProps = {
    isSelected: false
};
ErrorMessage.propTypes = {
    info: PropTypes.string
};
ErrorBoundary.propTypes = {
    children: PropTypes.node
};
Task.propTypes = {
    isComplete: PropTypes.bool,
    isErrored: PropTypes.bool,
    isSkipped: PropTypes.bool,
    isPending: PropTypes.bool,
    text: PropTypes.string
};
Task.defaultProps = {
    isComplete: false,
    isErrored: false,
    isSkipped: false,
    isPending: false,
    text: &apos;task description&apos;
};
TaskList.propTypes = {
    command: PropTypes.string,
    options: PropTypes.any,
    terms: PropTypes.arrayOf(PropTypes.string),
    done: PropTypes.func
};
TaskList.defaultProps = {
    command: &apos;&apos;,
    options: {skipInstall: false},
    terms: []
};
Warning.propTypes = {
    callback: PropTypes.func,
    children: PropTypes.node
};
UI.propTypes = {
    input: PropTypes.array,
    flags: PropTypes.object,
    done: PropTypes.func
};
UI.defaultProps = {
    input: [],
    flags: {}
};
export default UI;
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
