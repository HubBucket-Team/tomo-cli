<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: commands/add-marionette/templates/mn.redux.state.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: commands/add-marionette/templates/mn.redux.state.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file Add Redux store to application
 * @description Features:
 * - Enhanced getState that accepts path parameter
 * - "dispatch logging" middleware
 * - Basic reducer showcasing how to leverage lodash for updating state
 * @module plugins/redux.state
 * @example &lt;caption>Extend application object&lt;/caption>
 * var state = require('./plugins/redux.state');
 * var app = new Marionette.Application();
 * module.exports = Object.assign(app, state);
 * @example &lt;caption>Enhanced getState accepts path parameter&lt;/caption>
 * app.getState();// {name: 'omaha-project', count: 42}
 * app.getState('count');// 42
 * @example &lt;caption>Update state with Redux API&lt;/caption>
 * app.getState('count');// 42
 * app.dispatch({type: 'INCREMENT'});
 * app.getState('count');// 43
**/

const {get, update} = require('lodash');
const {applyMiddleware, compose, createStore} = require('redux');

const initialState = {
    name: 'omaha-project',
    count: 42
};

module.exports = createStore(
    reducer,
    initialState,
    compose(
        applyMiddleware(dispatchLogger),
        addGetStatePathParameter()
    )
);

// state reducer
function reducer(state, action) {
    switch (action.type) {
        case 'INCREMENT':
            return update(state, 'count', increment);
        case 'DECREMENT':
            return update(state, 'count', decrement);
        default:
            return state;
    }
}
// middleware
function dispatchLogger() {
    return next => action =>
        // console.log(`Dispatch: ${action.type}`);
        next(action)
    ;
}
// store enhancer
function addGetStatePathParameter() {
    return createStore => (reducer, preloadedState, enhancer) => {
        const store = createStore(reducer, preloadedState, enhancer);
        const getState = path => {
            if (typeof (path) === 'string') {
                return get(store.getState(), path);
            } else {
                return store.getState();
            }
        };
        const {dispatch, subscribe} = store;
        return {getState, dispatch, subscribe};
    };
}
// pure functions
function increment(val) {
    return val + 1;
}
function decrement(val) {
    return val - 1;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-app.html">app</a></li><li><a href="module-commands.html">commands</a></li><li><a href="module-plugins_logging.html">plugins/logging</a></li><li><a href="module-ui.html">ui</a></li><li><a href="module-utils.html">utils</a></li><li><a href="plugins_redux.module_state.html">plugins/redux.state</a></li></ul><h3>Classes</h3><ul><li><a href="module-ui-Task.html">Task</a></li><li><a href="module-ui-TaskList.html">TaskList</a></li><li><a href="module-ui-Warning.html">Warning</a></li><li><a href="module-utils-BabelConfigModuleEditor.html">BabelConfigModuleEditor</a></li><li><a href="module-utils-EslintConfigModuleEditor.html">EslintConfigModuleEditor</a></li><li><a href="module-utils-PackageJsonEditor.html">PackageJsonEditor</a></li><li><a href="module-utils-PostcssConfigEditor.html">PostcssConfigEditor</a></li><li><a href="module-utils-Scaffolder.html">Scaffolder</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Marionette">Marionette</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Sun Apr 14 2019 20:34:48 GMT+0300 (East Africa Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
